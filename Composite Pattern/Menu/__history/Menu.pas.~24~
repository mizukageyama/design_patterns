unit Menu;

interface

uses
  IteratorIntf, MenuComponent, System.Generics.Collections,
  MenuComponentIterator;

type
  TMenu = class(TMenuComponent)
  private
    FMenuComponents: TList<TMenuComponent>;
    FName: String;
    FDescription: String;
  public
    constructor Create(AName, ADescription: String);
    procedure Add(MenuComponent: TMenuComponent); override;
    procedure Remove(MenuComponent: TMenuComponent); override;
    function GetChild(I: Integer): TMenuComponent; override;
    function GetName: String; override;
    function GetDescription: String;
    procedure Print; override;
  end;

implementation

{ TMenu }

procedure TMenu.Add(MenuComponent: TMenuComponent);
begin
  FMenuComponents.Add(MenuComponent);
end;

constructor TMenu.Create(AName, ADescription: String);
begin
  FName := AName;
  FDescription := ADescription;
  FMenuComponents := TList<TMenuComponent>.Create;
end;

function TMenu.GetChild(I: Integer): TMenuComponent;
begin
  Result := FMenuComponents.Items[I];
end;

function TMenu.GetDescription: String;
begin
  Result := FDescription;
end;

function TMenu.GetName: String;
begin
  Result := FName;
end;

procedure TMenu.Print;
begin
  Write(sLineBreak + GetName);
  WriteLn(', ' + GetDescription);
  WriteLn('-------------------');

  var Iterator := TMenuComponentIterator.Create(FMenuComponents);
  while Iterator.HasNext do
  begin
      print('here');
//    var MenuComponent := Iterator.Next as TMenu;
//    MenuComponent.Print;
  end;
end;

procedure TMenu.Remove(MenuComponent: TMenuComponent);
begin
  FMenuComponents.Remove(MenuComponent);
end;

end.
